
var defaultSet=0;var tradeMarketCostListArray=[];var loading='<tr><td colspan="3" style="font-size:15px;background-color:#FFFFFF;" align="center"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Loading...</td></tr>';$(".list-trademarketcost tbody").html(loading);var tradeMarketCostRefresh=function(){defaultSet=1};var getMarketCost=function(a,c,b){if(a=="buy"){tradePageSet.code="sell";domObjSet.sell_price.val((c).formatWon());domObjSet.sell_amount.val(b.formatBitcoin())}else{if(a=="sell"){tradePageSet.code="buy";domObjSet.buy_price.val((c).formatWon());domObjSet.buy_amount.val(b.formatBitcoin())}}displayInputAmount()};function tradeMarketCostList(h){if(tradeMarketCostListArray&&typeof tradeMarketCostListArray[0]!=="undefined"){defaultSet=1}if(typeof chartPageSet!=="undefined"){drawTradeChart(h)}try{h=$.parseJSON(h)}catch(n){console.log("e:"+n+" type:"+(typeof h));return}if(!Array.isArray(h)){return}var f=0;var o=0;var j=[];var r=7;var c=1;var k="";var m="";var l=[];var d=false;var a="";var p=0;var b="";var q="";for(var g=0;g<h.length;g++){if(h[g][3]=="sell"){f++}if(h[g][3]=="buy"){o++}}if(f!=7){for(var g=r;g>f;g--){m=langConvert("lang.commonAsk","")+"("+g+")";b+='<tr class="red">';b+="<td>"+(parseFloat(0)).toFixed(8)+"</td>";b+="<td>0</td>";b+='<td class="none-bg none-border"></td>';b+="</tr>"}}if(o!=7){for(var g=(o+1);g<8;g++){m=langConvert("lang.commonBid","")+"("+g+")";q+='<tr class="blue">';q+='<td class="none-bg none-border"></td>';q+="<td>0</td>";q+="<td>"+(parseFloat(0)).toFixed(8)+"</td>";q+="</tr>"}}for(var g=0;g<h.length;g++){if(typeof h[g][3]==="undefined"){k='<tr><th colspan="3"><center>'+langConvert("lang.msgExceptionsoccurred","")+"</center></th></tr>";j.push(k);$(".list-trademarketcost tbody").html(j.join());return false}else{if(h[g][3]=="sell"){if(f<8){k="";if(g==0&&r!=f){k+=b}l=h[g][3]+","+h[g][0]+","+h[g][1];if(defaultSet!=0){d=compare(tradeMarketCostListArray[g],l)}m=langConvert("lang.commonAsk","")+"("+f+")";if(typeof tradePageSet!=="undefined"){p=(parseFloat(h[g][1])).toFixed(8);a=' style="cursor:pointer" onClick="getMarketCost(\''+h[g][3]+"',"+h[g][0]+","+p+')" '}if(d){k+='<tr class="red" '+a+"> "}else{if(defaultSet==1){k+="<tr class='red animated ' "+a+">"}else{k+="<tr class='red' "+a+">"}}k+="<td>"+h[g][1].formatBitcoin()+"</td>";k+="<td>"+(h[g][0]+"").toString().formatNumber()+"</td>";k+='<td class="none-bg none-border"></td>'}else{k=""}r--;f--}else{if(h[g][3]=="buy"){if(c<8){k="";if(g==0&&r!=f){k+=b}l=h[g][3]+","+h[g][0]+","+h[g][1];if(defaultSet!=0){d=compare(tradeMarketCostListArray[g],l)}m=langConvert("lang.commonBid","")+"("+c+")";if(typeof tradePageSet!=="undefined"){p=(parseFloat(h[g][1])).toFixed(8);a=' style="cursor:pointer" onClick="getMarketCost(\''+h[g][3]+"',"+h[g][0]+","+p+')" '}if(d){k+='<tr class="blue" '+a+">"}else{if(defaultSet==1){k+='<tr class="blue animated" '+a+">"}else{k+='<tr class="blue" '+a+">"}}k+='<td class="none-bg none-border"></td>';k+="<td>"+(h[g][0]+"").toString().formatNumber()+"</td>";k+="<td>"+h[g][1].formatBitcoin()+"</td>"}else{k=""}c++}}}if(g==(h.length-1)&&o!=7){k+=q}j.push(k);tradeMarketCostListArray.push(l);tradeMarketCostListArray[g]=l}if(h.length==0){k=b+q;j.push(k)}$(".list-trademarketcost tbody").html(j.join());if($(".animated2").length){clearTradeAnimationClass()}}function clearAnimationClass(){var b=$(".sell");var a=$(".buy");var c=$(".tradecomlist");setTimeout(function(){b.removeClass("sell_effect");a.removeClass("buy_effect");c.removeClass("trade_effect")},5000)}var clearTradeAnimationClass=function(a){setTimeout(function(){$("#market-trade-his #"+a).removeClass("animated2")},3000)};var preTradeSellMarketCostListArray=[];var preTradeBuyMarketCostListArray=[];function tradeMarketBuyCostList(d){var g=[];var b="";if(!d){b='<tr><td colspan="3" style="max-height:30px;"><center>'+langConvert("lang.viewEmptyData","")+"</center></td></tr>";g.push(b);$("table.short-list-tradebuymarketcost>tbody").html(g.join());return}try{if(typeof d!=="object"){d=JSON.parse(d)}}catch(f){console.log("tradecomlist e:"+f+" type:"+(typeof d));return}var h=10;var c=0;var a=[];for(i=0;i<h;i++){if(typeof d[i]!=="undefined"){compare_data=d[i][0]+"-"+d[i][1];c=preTradeBuyMarketCostListArray.indexOf(compare_data);if(preTradeBuyMarketCostListArray.length==0){c=0}if(c===-1){b='<tr class="animated2">'}else{b="<tr>"}b+='<td style="max-height:30px;" class="text-align-center">'+(d[i][0]+"").toString().formatNumber()+"</td>";b+='<td class="text-align-center">'+(d[i][1]).formatBitcoin()+"</td>";b+='<td class="text-align-right">'+(d[i][2]+"").toString().formatNumber()+"</td>";b+="</tr>";g.push(b);a.push(compare_data)}}preTradeBuyMarketCostListArray=a;if(d.length==0){b='<tr><td colspan="3" style="max-height:30px;"><center>'+langConvert("lang.msgThereAreNoRecentTransactionHistory","")+"</center></td></tr>";g.push(b)}$("table.short-list-tradebuymarketcost>tbody").html(g.join())}function tradeMarketSellCostList(d){var g=[];var a="";if(!d){a='<tr><td colspan="3" style="max-height:30px;"><center>'+langConvert("lang.viewEmptyData","")+"</center></td></tr>";g.push(a);$("table.short-list-tradesellmarketcost>tbody").html(g.join());return}try{if(typeof d!=="object"){d=JSON.parse(d)}}catch(f){console.log("tradecomlist e:"+f+" type:"+(typeof d));return}var h=10;var b=0;var c=[];for(i=0;i<h;i++){if(typeof d[i]!=="undefined"){compare_data=d[i][0]+"-"+d[i][1];b=preTradeSellMarketCostListArray.indexOf(compare_data);if(preTradeSellMarketCostListArray.length==0){b=0}if(b===-1){a='<tr class="animated2">'}else{a="<tr>"}a+='<td style="max-height:30px;" class="text-align-center">'+(d[i][0]+"").toString().formatNumber()+"</td>";a+='<td class="text-align-center">'+(d[i][1]).formatBitcoin()+"</td>";a+='<td class="text-align-right">'+(d[i][2]+"").toString().formatNumber()+"</td>";a+="</tr>";g.push(a);c.push(compare_data)}}preTradeSellMarketCostListArray=c;if(d.length==0){a='<tr><td colspan="3" style="max-height:30px;"><center>'+langConvert("lang.msgThereAreNoRecentTransactionHistory","")+"</center></td></tr>";g.push(a)}$("table.short-list-tradesellmarketcost>tbody").html(g.join())}var tradeCompleteLastestDT=null;function tradeCompleteList(b){var g=[];var a="";if(!b){a='<tr><td colspan="5" style="max-height:30px;"><center>'+langConvert("lang.viewEmptyData","")+"</center></td></tr>";g.push(a);$("table.short-list-tradecomplete>tbody").html(g.join());return}try{if(typeof b!=="object"){b=JSON.parse(b)}}catch(f){console.log("tradecomlist e:"+f+" type:"+(typeof b));return}var d="";var j="";var c=false;var h=10;for(i=0;i<h;i++){if(typeof b[i]!=="undefined"){d=(b[i][4]+"").toString();d=d.substring(5,d.length);d=d.substring(0,d.length-3);a="<tr>";if(tradeCompleteLastestDT!=null&&!c){if(tradeCompleteLastestDT!=null&&typeof tradeCompleteLastestDT!=="undefined"&&b[i][4]==tradeCompleteLastestDT){c=true}else{a='<tr class="tradecomlist animated2">'}}if(b[i][1]=="buy"){j="구매"}else{if(b[i][1]=="sell"){j="판매"}}a+='<td style="max-height:30px;" class="text-align-left">'+d+"</td>";a+='<td class="text-align-center">'+j+"</td>";a+='<td class="text-align-center">'+(b[i][2]+"").toString().formatNumber()+"</td>";a+='<td class="text-align-right">'+(b[i][5]+"").toString().formatNumber()+"</td>";a+='<td class="text-align-right">'+(b[i][3]).formatBitcoin()+"</td>";a+="</tr>";g.push(a)}}if(b.length==0){a='<tr><td colspan="5" style="max-height:30px;"><center>'+langConvert("lang.msgThereAreNoRecentTransactionHistory","")+"</center></td></tr>";g.push(a)}else{tradeCompleteLastestDT=b[0][4]}$("table.short-list-tradecomplete>tbody").html(g.join())}var compare=function(d,c){var f=0,e;if(typeof d=="object"&&d){if(Array.isArray(d)){if(!Array.isArray(c)||d.length!=c.length){return false}for(e=d.length;f<e;f++){if(!compare(d[f],c[f])){return false}}return true}else{for(e in c){if(c.hasOwnProperty(e)){f++}}for(e in d){if(d.hasOwnProperty(e)){if(!compare(d[e],c[e])){return false}f--}}return !f}}return d===c};